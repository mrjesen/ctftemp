
document.addEventListener('luci-loaded',function(ev){(function($){$(".main > .loading").fadeOut();function trimText(text){return text.replace(/[ \t\n\r]+/g," ");}
var lastNode=undefined;var mainNodeName=undefined;var nodeUrl="";(function(node){var luciLocation;if(node[0]=="admin"){luciLocation=[node[1],node[2]];}else{luciLocation=node;}
for(var i in luciLocation){nodeUrl+=luciLocation[i];if(i!=luciLocation.length-1){nodeUrl+="/";}}})(luciLocation);function getCurrentNodeByUrl(){var ret=false;if(!$('body').hasClass('logged-in')){luciLocation=["Main","Login"];return true;}
$(".main > .main-left > .nav > .slide > .menu").each(function(){var ulNode=$(this);ulNode.next().find("a").each(function(){var that=$(this);var href=that.attr("href");if(href.indexOf(nodeUrl)!=-1){ulNode.click();ulNode.next(".slide-menu").stop(true,true);lastNode=that.parent();lastNode.addClass("active");ret=true;return true;}});});return ret;}
$(".main > .main-left > .nav > .slide > .menu").click(function(){var ul=$(this).next(".slide-menu");var menu=$(this);$(".main > .main-left > .nav > .slide > .menu").each(function(){var ulNode=$(this);ulNode.removeClass("active");ulNode.next(".slide-menu").stop(true).slideUp("fast")});if(!ul.is(":visible")){menu.addClass("active");ul.addClass("active");ul.stop(true).slideDown("fast");}else{ul.stop(true).slideUp("fast",function(){menu.removeClass("active");ul.removeClass("active");});}
return false;});$(".main > .main-left > .nav > .slide > .slide-menu > li > a").click(function(){if(lastNode!=undefined)lastNode.removeClass("active");$(this).parent().addClass("active");$(".main > .loading").fadeIn("fast");return true;});$(".main > .main-left > .nav > .slide > .slide-menu > li").click(function(){if(lastNode!=undefined)lastNode.removeClass("active");$(this).addClass("active");$(".main > .loading").fadeIn("fast");window.location=$($(this).find("a")[0]).attr("href");return false;});if(getCurrentNodeByUrl()){mainNodeName="node-"+luciLocation[0]+"-"+luciLocation[1];mainNodeName=mainNodeName.replace(/[ \t\n\r\/]+/g,"_").toLowerCase();$("body").addClass(mainNodeName);}
var showSide=false;$(".showSide").click(function(){if(showSide){$(".darkMask").stop(true).fadeOut("fast");$(".main-left").stop(true).animate({width:"0"},"200");$(".main-right").css("overflow-y","visible");showSide=false;}else{$(".darkMask").stop(true).fadeIn("fast");$(".main-left").stop(true).animate({width:"13rem"},"200");$(".main-right").css("overflow-y","hidden");showSide=true;}});$(".darkMask").click(function(){if(showSide){showSide=false;$(".darkMask").stop(true).fadeOut("fast");$(".main-left").stop(true).animate({width:"0"},"fast");$(".main-right").css("overflow-y","visible");}});$(window).resize(function(){if($(window).width()>921){$(".main-left").css("width","");$(".darkMask").stop(true);$(".darkMask").css("display","none");showSide=false;}});$("legend").each(function(){var that=$(this);that.after("<span class='panel-title'>"+that.text()+"</span>");});$(".cbi-section-table-titles, .cbi-section-table-descr, .cbi-section-descr").each(function(){var that=$(this);if(that.text().trim()==""){that.css("display","none");}});$(".main-right").focus();$(".main-right").blur();$("input").attr("size","0");$(".cbi-button-up").val("__");$(".cbi-button-down").val("__");$(".slide > a").removeAttr("href");if(mainNodeName!=undefined){console.log(mainNodeName);switch(mainNodeName){case"node-status-system_log":case"node-status-kernel_log":$("#syslog").focus(function(){$("#syslog").blur();$(".main-right").focus();$(".main-right").blur();});break;case"node-status-firewall":var button=$(".node-status-firewall > .main fieldset li > a");button.addClass("cbi-button cbi-button-reset a-to-btn");break;case"node-system-reboot":var button=$(".node-system-reboot > .main > .main-right p > a");button.addClass("cbi-button cbi-input-reset a-to-btn");break;}}
var getaudio=$('#player')[0];var audiostatus='off';$(document).on('click touchend','.speaker',function(){if(!$('.speaker').hasClass("speakerplay")){if(audiostatus=='off'){$('.speaker').addClass('speakerplay');getaudio.load();getaudio.play();audiostatus='on';return false;}else if(audiostatus=='on'){$('.speaker').addClass('speakerplay');getaudio.play()}}else if($('.speaker').hasClass("speakerplay")){getaudio.pause();$('.speaker').removeClass('speakerplay');audiostatus='on';}});$('#player').on('ended',function(){$('.speaker').removeClass('speakerplay');audiostatus='off';});setTimeout(function(){var config={duration:600};Waves.attach("button,input[type='button'],input[type='reset'],input[type='submit']",['waves-light']);$("button,input[type='button'],input[type='reset'],input[type='submit']").mouseenter(function(){Waves.ripple(this,{wait:null});}).mouseleave(function(){Waves.calm(this);});Waves.init(config);$(".waves-input-wrapper").filter(function(){if($(this).children().css("display")=="none"){return true;}else{return false;}}).hide();$("div>select:first-child,div>input[type='text']:first-child").filter(function(){return(!$(this).parents(".cbi-dynlist").length&&!$("body.Diagnostics").length&&!$(this).hasClass("cbi-input-password"))}).after("<span class='focus-input'></span>");$("input[type='checkbox']").filter(function(){return(!$(this).next("label").length)}).show();$("select,input").filter(function(){return($(this).next(".focus-input").length)}).focus(function(){$(this).css("border-bottom","1px solid #fff");}).blur(function(){$(this).css("border-bottom","1px solid #9e9e9e");});},0);var options={attributes:true};function callback(){$("div>select:first-child,div>input[type='text']:first-child").filter(function(){return(!$(this).parents(".cbi-dynlist").length&&!$(this).hasClass("cbi-input-password"))}).after("<span class='focus-input'></span>");$("select,input").filter(function(){return($(this).next(".focus-input").length)}).focus(function(){$(this).css("border-bottom","1px solid #fff");}).blur(function(){$(this).css("border-bottom","1px solid #9e9e9e");});$("input[type='checkbox']").filter(function(){return(!$(this).next("label").length)}).show();}
var mutationObserver=new MutationObserver(callback);mutationObserver.observe($("body")[0],options);$(".cbi-value").has("textarea").css("background","none");if(document.body.scrollHeight>window.innerHeight){$(".cbi-page-actions.control-group").addClass("fixed")}})(jQuery);});